<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="css/admin.css">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://code.jquery.com/jquery-3.4.1.js"
        integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>

</head>
<body>
    <div>
        <div class="sidebar">
           <h3>Device Management</h3>
           <a href="device_management.html">Dashboard</a>
           <a href="logs.html">Logs</a>
           <a href="setting.html">Setting</a>
           
        </div>
        
        <div class="main">
          <div class="header"><b>Welcome John</b></div>
          <div class="content">
          	<div class="content__search">
                <input type="text" placeholder="Nhập vào đây">
                <button id="search">Search</button>
                
            </div>
            <div class="table">
              <table class="">
                  <tr  class="">
                      <th>Device ID #</th>
                      <th>Name</th>
                      <th>Action</th>
                      <th>Date</th>
                      
                  </tr>

                  <tbody id="myTable">
                      
                  </tbody>
              </table>
            </div>
            <div class="content__paging">
                <div class="page">
                    <ul style="display: inline-block;">
                        <button onclick="perviousPage()" id="btn_previous"><< Previous</button>                        <div class="number-page" id="number-page">
                            
	                    </div>
                        <button onclick="nextPage()" id="btn_next">nextPage >></button> 
                    </ul>
                </div>
                <div class="page-config">
                    <label for="">Item per page: </label>
                    <select name="" id="selectBox" onchange="changeFunc()">
                        <option value="3" >3</option>
                        <option value="6">6</option>
                        <option value="9">9</option>
                        <option value="12">12</option>
                    </select>
                </div>
                <div class="total-page"></div>
                <div class="total-item"></div>
            </div>
        </div>
    </div>
    
  
   
</body>
  
<script type="text/javascript">
	var selectBox = document.getElementById("selectBox").value;
	var perPage = selectBox;
	let currentPage = 1;
	let start = 0;
	let end = perPage;

	

	const devices = [
					{DeviceID :'101', Name :"TV", Action :"Turn On", Date :"124689"},
					{DeviceID :"102", Name :"Washer", Action :"Sleep", Date :"124533"},
					{DeviceID :"103", Name :"Selling Fan", Action :"Turn Off", Date :"12518"},
					{DeviceID :"104", Name :"TV", Action :"Turn On", Date :"124689"},
					{DeviceID :"105", Name :"Washer", Action :"Sleep",Date :"124533"},
					{DeviceID :"106", Name :"Selling Fan", Action :"Turn Off", Date :"12518"},
					{DeviceID :"107", Name :"TV", Action :"Turn On", Date :"124689"},
					{DeviceID :"108", Name :"Washer", Action :"Sleep", Date :"124533"},
					{DeviceID :"109", Name :"Selling Fan", Action :"Turn Off", Date :"12518"},
					{DeviceID :"110", Name :"TV", Action :"Turn On", Date :"124689"},
					{DeviceID :"111", Name :"Washer", Action :"Sleep",Date :"124533"},
					{DeviceID :"112", Name :"Selling Fan", Action :"Turn Off", Date :"12518"},
					{DeviceID :"113", Name :"TV", Action :"Turn On", Date :"124689"},
					{DeviceID :"114", Name :"Washer", Action :"Sleep", Date :"124533"},
					{DeviceID :"115", Name :"Selling Fan", Action :"Turn Off", Date :"12518"},
					{DeviceID :"116", Name :"TV", Action :"Turn On", Date :"124689"},
					{DeviceID :"117", Name :"Washer", Action :"Sleep",Date :"124533"},
					{DeviceID :"118", Name :"Selling Fan", Action :"Turn Off", Date :"12518"},
					{DeviceID :"119", Name :"TV", Action :"Turn On", Date :"124689"},
					{DeviceID :"120", Name :"Washer", Action :"Sleep", Date :"124533"},
					{DeviceID :"121", Name :"Selling Fan", Action :"Turn Off", Date :"12518"},
					{DeviceID :"122", Name :"TV", Action :"Turn On", Date :"124689"},
					{DeviceID :"123", Name :"Washer", Action :"Sleep",Date :"124533"},
					{DeviceID :"124", Name :"Selling Fan", Action :"Turn Off", Date :"12518"},
				]

	const totalPages = Math.ceil(devices.length / perPage);
	const btnNext = document.querySelector('.btn-next');
	var numberOfPage = document.getElementById("number-page");
	function showTotalPages(){
		for (var i = 0; i < Math.ceil(devices.length/perPage); i++){
	      var soTrang = `
	      					<li onclick = "changePageNumber(this.id)" id="trang${i+1}"> <a > ${i+1} </a> </li>
	      				`
	      numberOfPage.innerHTML += soTrang;
	    }
	}

	showTotalPages();
	
    
	
	var idButton;
    function changePageNumber(idButton){
    	
    	currentPage = idButton.replace(/[^0-9]/g, '');
    	start = (currentPage-1) * perPage;
		end = currentPage * perPage;
		renderDevice();
		console.log(idButton)
    }

	function renderDevice() {
	    html = '';
	    const content = devices.map((item, index) => {
	        if (index >= start && index < end) {
	            html += '<tr>';
	           
	            html += '<td>' + item.DeviceID + '</td>';
	            html += '<td>' + item.Name + '</td>';
	            html += '<td>' + item.Action + '</td>';
	            html += '<td>' + item.Date + '</td>';
	            
	            html += '</tr>';
	            
	            return html;
	        }
	    });
	    document.getElementById('myTable').innerHTML = html;
	    
	}

	

	function nextPage(){
		currentPage++;
		

		if(currentPage > totalPages){
			currentPage = totalPages;
		}
		
		start = (currentPage-1) * perPage;
		end = currentPage * perPage;



		renderDevice();
	}

	function perviousPage(){
		currentPage--;
		

		if(currentPage <= 1){
			currentPage = 1;
		}
		console.log(start,end);
		start = (currentPage-1) * perPage;
		end = currentPage * perPage;
		
		renderDevice();
	}

	function changeFunc() {
	    /*var selectBox = document.getElementById("selectBox").value;
		
	    var selectedValue = selectBox.options[selectBox.selectedIndex].value;
	    
	    var perPage = selectedValue;*/


	    document.getElementById("myTable").innerHTML = "";
	}

	renderDevice();


</script>
  
</html> 
